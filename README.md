# Stock-prediction

## Description

Kospi200 종목을 대상으로 향후 주가를 Prophet 모델을 이용해 예측한 후, 이를 보여주는 trend와 pattern으로 분리되는 시계열 차트를 구현하는 프로젝트.
추가로 선택된 주식 관련 기사를 크롤링하여 상단에 제목 및 링크를 제공한다.

차트 컴포넌트는 크게 두 가지 차트로 구성된다.
첫 번째는 일반적인 주식 차트의 형태인 시가, 종가, 고가, 저가 정보를 박스 플롯과 같은 형태로 나타내는 차트다.
두 번째는 prophet 모델이 반환하는 trend 데이터와, pattern 데이터를 보여주는 차트이다. 이때, trend 데이터와 pattern 데이터를 더 강조하여 보여줄 수 있도록 ‘펼치기’버튼을 클릭하면 2개의 차트로 나누어지는 효과를 구현했다.

마우스 휠 스크롤 및 우측 상단의 배율 표시 버튼 클릭시 배율을 조절하는 기능과 차트 화면 드래그를 통해 이동하는 기능 등을 추가로 구현했다.

백엔드는 단순한 프록시 서버 역할을 하도록 구현하였으며, 요청이 들어오면 네이버증권 사이트를 크롤링하여 데이터를 구성한 후 prophet모델을 거쳐 반환한다.

## Points

### 1. SVG로 직접 구현한 차트

외부 라이브러리를 사용하지않고 직접 순수 svg 컴포넌트만을 이용해 차트를 구현했다. 차트를 이루는 선, 도형, 글자 하나하나의 위치를 수식으로 계산하며 구현하고, 내가 원하는대로 배치되는 것을 확인하는 작업이 즐거웠다. 처음엔 고정된 viewbox크기에 구현했다가 반응형으로 input width에 따라 배치가 변경되도록 고도화했다. transition을 이용해 차트가 분리되는 것을 매끄럽게 표현하는 것에 집중했다. 또한, 휠 스크롤이나 키보드 방향키 등에 대한 이벤트핸들러도 추가하여 사용자가 생각하는 대로 움직일 수 있도록 했다.

### 2. News animation

interval을 이용해 약 2초에 한번씩 크롤링한 헤드라인이 넘어가도록 구현했다. absolute position을 index에 따라 배치한 후, index값을 주기적으로 변화시키는 방식으로 구현했다.

## 배포 방식

API를 이용한 배포방식에서 크롤링한 데이터를 이용해 정적웹을 주기적으로 생성하는 방식으로 변경하였다. 이에 github actions와 pages를 이용했다.

## Dependency

- 프론트
  - react 18, mui 6 - 자세한 버전은 frontend/package.json
- 백엔드
  - fastAPI, Prophet - 자세한 버전은 backend/requirements.txt
